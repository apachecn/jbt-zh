# 10M é«˜çº§ WebDriver â€“ ä»¥æ— å¤´æ¨¡å¼è¿è¡Œæµ‹è¯•

> åŸæ–‡ï¼š [https://javabeginnerstutorial.com/selenium/10m-advanced-webdriver-running-tests-in-headless-mode/](https://javabeginnerstutorial.com/selenium/10m-advanced-webdriver-running-tests-in-headless-mode/)

æˆ‘æ•¢è‚¯å®šï¼Œæ‚¨ç°åœ¨ä¼šå¬è¯´æ— å¤´ï¼Œå› ä¸º Google ä¸ºå…¶ Chrome æµè§ˆå™¨ï¼ˆä» 59 ç‰ˆå¼€å§‹ï¼‰å¼•å…¥äº†æ— å¤´é€‰é¡¹ï¼ Firefox ç´§éšå…¶åã€‚ å®ƒä¹Ÿå¯ä»¥åœ¨æ— å¤´æ¨¡å¼ä¸‹è¿è¡Œï¼ï¼ è®©æˆ‘ä»¬åœ¨æ²¡æœ‰ Firefox çš„æƒ…å†µä¸‹åœ¨ Firefox ä¸­æ‰§è¡Œä¸€äº›è‡ªåŠ¨åŒ–çš„ Selenium æµ‹è¯•ï¼ ğŸ˜‰æ¢å¥è¯è¯´ï¼Œæµ‹è¯•åœ¨åå°è¿è¡Œï¼Œå¹¶ä¸”æ²¡æœ‰æ˜¾ç¤ºï¼ˆå³ï¼Œæµè§ˆå™¨ UI ä¸æ˜¾ç¤ºç»™ç”¨æˆ·ï¼‰ã€‚ è¯¥ä»£ç è¿˜å°†æä¾›ç»™ Chrome æµè§ˆå™¨ã€‚

æ‚¨è„‘æµ·ä¸­å¯èƒ½ä¼šå‡ºç°çš„ç¬¬ä¸€ä¸ªé—®é¢˜æ˜¯ï¼Œä¸ºä»€ä¹ˆæˆ‘é¦–å…ˆéœ€è¦ä¸€ä¸ªæ— å¤´çš„æµè§ˆå™¨ï¼Ÿ æˆ‘æ”¶åˆ°ä½ çš„æ¥ä¿¡ã€‚ ä¸ç”¨æ‹…å¿ƒï¼Œæˆ‘æœ‰ç­”æ¡ˆå¹¶ä¸”ç›¸ä¿¡æˆ‘ï¼Œè¿™äº›éƒ½æ˜¯å¾ˆå¥½çš„ç­”æ¡ˆã€‚ å› æ­¤ï¼Œäº‹ä¸å®œè¿Ÿï¼Œä»¥ä¸‹æ˜¯æ‚¨æ— å¤´çš„å‡ ä¸ªåŸå› ï¼Œ

1.  å¦‚æœæ‚¨çš„ç›®æ ‡æ˜¯è·å¾—æ›´å¥½çš„**é€Ÿåº¦**å’Œ**æ€§èƒ½**ï¼Œé‚£ä¹ˆåˆ«æ— æ‰€æ±‚ï¼ ç”±äºæ— éœ€ä¸ºæ¯ä¸ªæµ‹è¯•éƒ½å¯åŠ¨æµè§ˆå™¨ UIï¼Œä»è€Œé¿å…äº†åŠ è½½ JavaScriptï¼ŒCSS å’Œå‘ˆç° HTML æ‰€éœ€çš„æ‰€æœ‰æ—¶é—´ï¼Œå› æ­¤æµ‹è¯•è¿è¡Œé€Ÿåº¦æ›´å¿«ã€‚
2.  é€šå¸¸ï¼Œåœ¨ **CIï¼ˆè¿ç»­é›†æˆï¼‰ç®¡é“**ä¸­ï¼Œå®ƒéœ€è¦åœ¨æ²¡æœ‰å®é™… GUI çš„æœåŠ¡å™¨æˆ– Linux OS ç­‰ç³»ç»Ÿä¸Šè¿è¡Œã€‚ æ— å¤´æ¨¡å¼èŠ‚çœäº†ä¸€å¤©ï¼
3.  å¦‚æœæ‚¨æ‰€æœ‰çš„æµ‹è¯•éƒ½è¿è¡Œäº†å‡ ä¸ªå°æ—¶æ€ä¹ˆåŠï¼Ÿ åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œç”¨æˆ·å¿…é¡»ä»å­—é¢ä¸Šçœ‹å±å¹•ï¼Œè®©ç³»ç»Ÿæ‰§è¡Œå…¶å·¥ä½œï¼Œç›´åˆ°æ‰€æœ‰æµ‹è¯•å æ®æ•´ä¸ªå±å¹•ä¸ºæ­¢ã€‚ ç›¸åï¼Œå¦‚æœä»¥æ— å¤´æ¨¡å¼æ‰§è¡Œï¼Œåˆ™ç”¨æˆ·å¯ä»¥åœ¨åå°è¿è¡Œæµ‹è¯•æ—¶ç»§ç»­æ‰§è¡Œå…¶ä»–ä»»åŠ¡ã€‚
4.  å½“è„šæœ¬è¢«å¼€å‘å¹¶ä¸”ç¨³å®šæ—¶ï¼Œå¹¶ä¸éœ€è¦çœŸæ­£çœ‹åˆ°å®ƒä»¬æ­£åœ¨è¿è¡Œã€‚ ä»¥æ›´å¿«çš„æ–¹å¼åœ¨æ— å¤´æ¨¡å¼ä¸‹è¿è¡Œå®ƒä»¬ä¼¼ä¹å¾ˆæœ‰æ„ä¹‰ã€‚ å€ŸåŠ©æ—¥å¿—ï¼Œå¯ä»¥æ‰§è¡Œæ‰€éœ€çš„è°ƒè¯•ã€‚
5.  å¹¶è¡Œæ‰§è¡Œ â€“ æ— å¤´å¯é˜»æ­¢æ‰“å¼€å¤šä¸ªæµè§ˆå™¨ï¼Œå¹¶è®©æ‚¨æ‰§è¡Œå¤šä»»åŠ¡ã€‚
6.  æ— å¤´æ¨¡å¼ä¹Ÿå¯ä»¥æ‹æ‘„**æˆªå›¾**ã€‚ å› æ­¤ï¼Œä¸€æ—¦å‘ç”Ÿæ•…éšœï¼Œä¾¿å§‹ç»ˆå¯ä»¥ä»¥æ‰€éœ€çš„ä»»ä½•æ–¹å¼è·å–å¹¶å­˜å‚¨å¿«ç…§ã€‚

ä½†æ˜¯ï¼Œç§ï¼ æœ‰æ—¶å€™æ— å¤´å¯èƒ½ä¸æ˜¯å¾ˆæœ‰ç”¨ã€‚ ä¾‹å¦‚ï¼Œ

1.  åœ¨å¼€å‘è„šæœ¬æ—¶ï¼Œåœ¨ä¼ ç»Ÿçš„æµè§ˆå™¨ä¸­è¿è¡Œå®ƒä»¬å¯ä»¥å¸®åŠ©æˆ‘ä»¬ç›´è§‚åœ°æŸ¥çœ‹å®é™…æƒ…å†µï¼Œä»è€Œä½¿è‡ªåŠ¨åŒ–çš„åˆå§‹é˜¶æ®µçš„è°ƒè¯•å˜å¾—å®¹æ˜“ã€‚
2.  å½“æ¨¡æ‹Ÿåº”ç”¨çš„çœŸå®ç”¨æˆ·æ—¶
3.  å¯èƒ½æ— æ³•æ•è·æŸäº›é”™è¯¯ï¼Œä¾‹å¦‚å›¾åƒå´©æºƒæˆ–æ— æ³•åŠ è½½

è¯è™½å¦‚æ­¤ï¼Œè®©æˆ‘ä»¬çœ‹ä¸€äº›å·¥ä½œä»£ç ï¼

Chrome æ— å¤´æ¨¡å¼ï¼Œ

```java
import org.openqa.selenium.WebDriver;
import org.openqa.selenium.chrome.ChromeDriver;
import org.openqa.selenium.chrome.ChromeOptions;
public class HelloWorld_ChromeHeadless {
	public static void main(String[] args) {
		// System property set up
		System.setProperty("webdriver.chrome.driver", "browser-drivers\\chromedriver.exe");
		// Add options to Google Chrome
		ChromeOptions options = new ChromeOptions();
		// Setting headless argument
		options.addArguments("--headless");
		// To test responsive websites
		options.addArguments("window-size=1400,600");
		// Create a new instance for the class ChromeDriver
		// that implements WebDriver interface
		WebDriver driver = new ChromeDriver(options);
		// Assign the URL to be invoked to a String variable
		String baseUrl = "https://www.google.com";
		// Open baseUrl in IE browser window
		driver.get(baseUrl);
		// Print messages to console
		System.out.println(driver.getTitle());
		System.out.println("Hello World!"); 	
		// Close the IE browser
		driver.quit();

	}
}
```

Firefox åœ¨æ— å¤´æ¨¡å¼ä¸‹ï¼Œ

```java
import org.openqa.selenium.WebDriver;
import org.openqa.selenium.firefox.FirefoxDriver;
import org.openqa.selenium.firefox.FirefoxOptions;
public class HelloWorldFirefox_Headless {
	public static void main(String[] args) {
		//Selenium version 3 beta releases require system property set up
		System.setProperty("webdriver.gecko.driver", "browser-drivers\\geckodriver.exe");
		FirefoxOptions options = new FirefoxOptions();
		options.setHeadless(true);
		//Create a new instance for the class FirefoxDriver
		//that implements WebDriver interface
		WebDriver driver = new FirefoxDriver(options);
		//Assign the URL to be invoked to a String variable
		String baseUrl = "https://www.google.com";
		String pageTitle = "";
		String expectedTitle = "Google";
		//Open baseUrl in Firefox browser window
		driver.get(baseUrl);
		//Get the page title and assign to a String variable
		pageTitle = driver.getTitle();
		//Check if obtained page title matches with the expected title
		//and print the console output accordingly
		if(pageTitle.equals(expectedTitle)){
			System.out.println("Hello World! Result is as expected.");
		}else{
			System.out.println("Hello World! Assertion failed!");
		}
		//Close the Firefox browser
		driver.quit();
	}
}
```

### æ‰§è¡Œç»“æœï¼š

ä¸ºæ¯è¡Œä»£ç æä¾›äº†æ³¨é‡Šï¼Œä½¿å…¶æ˜“äºè¯´æ˜ã€‚

æ§åˆ¶å°çª—å£æ˜¾ç¤ºæ²¡æœ‰ä»»ä½•é”™è¯¯ã€‚ å®ƒè¿˜æ˜¾ç¤ºæµ‹è¯•ä»¥æ— å¤´æ¨¡å¼è¿è¡Œï¼Œå¹¶ä¸”æ‰€æœ‰æ¶ˆæ¯å‡æŒ‰é¢„æœŸæ–¹å¼æ‰“å°ã€‚

<figure class="wp-block-image">![](img/4a30c4df52d170bc53a065f3b53b87dd.png)

<figcaption>Eclipse console output â€“ Firefox in headless mode</figcaption>

</figure>

å°è¯•ä»Šå¤©çš„æŠ€èƒ½ï¼Œç¥æ‚¨å¥½è¿ã€‚ æˆ‘åšä¿¡è¿™äº›åœ¨æ‚¨çš„è‡ªåŠ¨åŒ–æ—…ç¨‹ä¸­çš„æŸäº›æ—¶å€™ä¼šå¾ˆæœ‰ç”¨ã€‚

ç¥ä½ æœ‰ç¾å¥½çš„ä¸€å¤©ï¼

###### ä¸‹ä¸€ç¯‡æ–‡ç« 